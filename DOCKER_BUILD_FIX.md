# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Docker Build –≤ GitHub Actions

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
```
ERROR: failed to build: unknown blob
```

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –î–æ–±–∞–≤–ª–µ–Ω Docker Buildx setup
```yaml
- name: Set up Docker Buildx
  uses: docker/setup-buildx-action@v3
  with:
    driver-opts: |
      image=moby/buildkit:latest
      network=host
```

**–ó–∞—á–µ–º:** Docker Buildx –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã multi-stage builds –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ—ë–≤
```yaml
cache-from: type=registry,ref=ghcr.io/kamran134/kamrankazimi:buildcache
cache-to: type=registry,ref=ghcr.io/kamran134/kamrankazimi:buildcache,mode=max
```

**–ó–∞—á–µ–º:** –£—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å "unknown blob"

### 3. –û—Ç–∫–ª—é—á–µ–Ω—ã provenance –∏ sbom
```yaml
provenance: false
sbom: false
```

**–ó–∞—á–µ–º:** –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å registry –∏ –Ω–µ –Ω—É–∂–Ω—ã –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### 4. –£–∫–∞–∑–∞–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —è–≤–Ω–æ
```yaml
platforms: linux/amd64
```

**–ó–∞—á–µ–º:** –ò–∑–±–µ–≥–∞–µ–º –ø—Ä–æ–±–ª–µ–º —Å multi-platform builds

### 5. –î–æ–±–∞–≤–ª–µ–Ω BUILDKIT_INLINE_CACHE
```yaml
build-args: |
  BUILDKIT_INLINE_CACHE=1
```

**–ó–∞—á–µ–º:** –í–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–±—Ä–∞–∑

## üìù –ü—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏ "unknown blob":

1. **–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫—ç—à–∞** - —Å—Ç–∞—Ä—ã–π –∫—ç—à –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π Docker
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å registry** - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å ghcr.io
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Buildx** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∏–ª–¥–µ—Ä–∞
4. **–ú–Ω–æ–≥–æ–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:

### 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```bash
git add .github/workflows/deploy.yml
git commit -m "fix: resolve Docker build 'unknown blob' error"
git push
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GitHub Actions:
- –ó–∞–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "Actions"
- –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è workflow
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –µ—Å–ª–∏ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏

### 3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è:

#### –û–ø—Ü–∏—è –ê: –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –≤—Ä—É—á–Ω—É—é
–ó–∞–π–¥–∏—Ç–µ –≤ Settings ‚Üí Actions ‚Üí General ‚Üí Actions cache –∏ —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫—ç—à–∏

#### –û–ø—Ü–∏—è –ë: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å buildcache –æ–±—Ä–∞–∑
–î–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤ workflow:
```yaml
- name: Clear buildcache
  run: |
    docker rmi ghcr.io/kamran134/kamrankazimi:buildcache || true
```

#### –û–ø—Ü–∏—è –í: –û—Ç–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ
–£–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ `cache-from` –∏ `cache-to` –∏–∑ workflow

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **GitHub Actions –∑–µ–ª—ë–Ω—ã–π** ‚úÖ
2. **Docker –æ–±—Ä–∞–∑ –ø–æ—è–≤–∏–ª—Å—è –≤ Packages** ‚úÖ
3. **Deploy –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ** ‚úÖ
4. **–°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** ‚úÖ

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

- –î–æ–±–∞–≤–ª–µ–Ω network=host –¥–ª—è buildx - —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è latest –≤–µ—Ä—Å–∏—è buildkit
- –ö—ç—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π ref –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

---

**–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ ‚úÖ  
**–î–∞—Ç–∞:** 2025-11-13  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot
